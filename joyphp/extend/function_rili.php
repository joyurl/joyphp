<?PHP


$jiaSet=Array();//放假设置 type: 0 显示其它信息 1 放假 2 上班 3 节日




//============================


$jiaSet[2014]=Array();
$jiaSet[2014][1][5]=Array(0,'小寒','');
$jiaSet[2014][1][20]=Array(0,'大寒','');
$jiaSet[2014][1][30]=Array(0,'除夕','');
$jiaSet[2014][2][4]=Array(0,'立春','');
$jiaSet[2014][2][19]=Array(0,'雨水','');
$jiaSet[2014][3][5]=Array(0,'惊蛰','');
$jiaSet[2014][3][21]=Array(0,'春分','');
$jiaSet[2014][4][5]=Array(0,'清明','');
$jiaSet[2014][4][20]=Array(0,'谷雨','');

$jiaSet[2014][5][5]=Array(0,'立夏','');
$jiaSet[2014][5][21]=Array(0,'小满','');

$jiaSet[2014][6][6]=Array(0,'芒种','');
$jiaSet[2014][6][21]=Array(0,'夏至','');
$jiaSet[2014][7][7]=Array(0,'小暑','');
$jiaSet[2014][7][23]=Array(0,'大暑','');
$jiaSet[2014][8][7]=Array(0,'立秋','');
$jiaSet[2014][8][23]=Array(0,'处暑','');
$jiaSet[2014][9][8]=Array(0,'白露','');
$jiaSet[2014][9][23]=Array(0,'秋分','');

$jiaSet[2014][10][8]=Array(0,'寒露','');
$jiaSet[2014][10][23]=Array(0,'霜降','');
$jiaSet[2014][11][7]=Array(0,'立冬','');
$jiaSet[2014][11][22]=Array(0,'小雪','');
$jiaSet[2014][12][7]=Array(0,'大雪','');
$jiaSet[2014][12][22]=Array(0,'冬至','');

$jiaSet[2014][1][1]=Array(1,'元旦','/holiday11/','元旦祝福');

$jiaSet[2014][1][26]=Array(2,'','');
$jiaSet[2014][1][31]=Array(1,'春节','/holiday10/','春节祝福');
$jiaSet[2014][2][1]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2014][2][2]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2014][2][3]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2014][2][4]=Array(1,'立春','/holiday10/','春节放假');
$jiaSet[2014][2][5]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2014][2][6]=Array(1,'','/holiday10/','春节放假');

$jiaSet[2014][2][8]=Array(2,'','');
$jiaSet[2014][2][14]=Array(3,'情人/元宵','/holiday214/','情人节祝福(元宵节为同一天)');

$jiaSet[2014][3][8]=Array(3,'妇女节','/holiday38/','三八妇女节祝福');
$jiaSet[2014][3][12]=Array(0,'植树节','');
$jiaSet[2014][4][1]=Array(0,'愚人节','/holiday41/','愚人节整人大全');
$jiaSet[2014][4][5]=Array(1,'清明节','/holiday1316/read/2696.html','清明节放假安排');
$jiaSet[2014][4][6]=Array(1,'','/holiday1316/read/2696.html','清明节放假');
$jiaSet[2014][4][7]=Array(1,'','/holiday1316/read/2696.html','清明节放假');

$jiaSet[2014][5][1]=Array(1,'劳动节','/holiday51/','五一劳动节祝福');
$jiaSet[2014][5][2]=Array(1,'','/holiday51/','五一劳动节放假');
$jiaSet[2014][5][3]=Array(1,'','/holiday51/','五一劳动节放假');
$jiaSet[2014][5][4]=Array(2,'青年节','/holiday54/','五四青年节祝福');
$jiaSet[2014][5][11]=Array(3,'母亲节','/holiday527/','母亲节祝福');
$jiaSet[2014][5][31]=Array(1,'','/holiday55/','端午节放假');
$jiaSet[2014][6][1]=Array(1,'儿童节','/holiday61/','六一儿童节放假');
$jiaSet[2014][6][2]=Array(1,'端午节','/holiday55/','端午节放假');

$jiaSet[2014][6][15]=Array(3,'父亲节','/holiday637/','父亲节祝福');
$jiaSet[2014][7][1]=Array(0,'建党节','');
$jiaSet[2014][8][1]=Array(0,'建军节','');
$jiaSet[2014][8][2]=Array(3,'七夕节','/holiday77/','七夕情人节祝福');
$jiaSet[2014][9][10]=Array(3,'教师节','/holiday910/','教师节祝福');
$jiaSet[2014][9][6]=Array(1,'','/holiday815/','中秋节放假');
$jiaSet[2014][9][7]=Array(1,'','/holiday815/','中秋节放假');
$jiaSet[2014][9][8]=Array(1,'中秋节','/holiday815/','中秋节祝福');

$jiaSet[2014][9][28]=Array(2,'','');
$jiaSet[2014][10][1]=Array(1,'国庆节','/holiday1001/','国庆节祝福');
$jiaSet[2014][10][2]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2014][10][3]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2014][10][4]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2014][10][5]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2014][10][6]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2014][10][7]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2014][10][11]=Array(2,'','');
$jiaSet[2014][11][11]=Array(0,'光棍节','/holiday1111/','光棍节祝福');
$jiaSet[2014][12][25]=Array(3,'圣诞节','/holiday1225/','圣诞节祝福');




//============================


$jiaSet[2015]=Array();
$jiaSet[2015][1][5]=Array(0,'小寒','');
$jiaSet[2015][1][20]=Array(0,'大寒','');
$jiaSet[2015][2][4]=Array(0,'立春','');
$jiaSet[2015][2][18]=Array(0,'除夕','');
$jiaSet[2015][3][6]=Array(0,'惊蛰','');
$jiaSet[2015][3][21]=Array(0,'春分','');
$jiaSet[2015][4][5]=Array(0,'清明','');
$jiaSet[2015][4][20]=Array(0,'谷雨','');

$jiaSet[2015][5][6]=Array(0,'立夏','');
$jiaSet[2015][5][21]=Array(0,'小满','');

$jiaSet[2015][6][6]=Array(0,'芒种','');
$jiaSet[2015][6][22]=Array(0,'夏至','');
$jiaSet[2015][7][7]=Array(0,'小暑','');
$jiaSet[2015][7][23]=Array(0,'大暑','');

$jiaSet[2015][8][8]=Array(0,'立秋','');
$jiaSet[2015][8][23]=Array(0,'处暑','');
$jiaSet[2015][9][8]=Array(0,'白露','');
$jiaSet[2015][9][23]=Array(0,'秋分','');

$jiaSet[2015][10][8]=Array(0,'寒露','');
$jiaSet[2015][10][24]=Array(0,'霜降','');
$jiaSet[2015][11][8]=Array(0,'立冬','');
$jiaSet[2015][11][22]=Array(0,'小雪','');
$jiaSet[2015][12][7]=Array(0,'大雪','');
$jiaSet[2015][12][22]=Array(0,'冬至','');

$jiaSet[2015][1][1]=Array(1,'元旦','/holiday11/','元旦祝福');
$jiaSet[2015][1][2]=Array(1,'','/holiday11/','元旦放假');
$jiaSet[2015][1][3]=Array(1,'','/holiday11/','元旦放假');
$jiaSet[2015][1][4]=Array(2,'','');

$jiaSet[2015][2][15]=Array(2,'','');
$jiaSet[2015][2][18]=Array(1,'除夕','/holiday10/','除夕放假');
$jiaSet[2015][2][19]=Array(1,'春节','/holiday10/','春节祝福');
$jiaSet[2015][2][20]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2015][2][21]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2015][2][22]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2015][2][23]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2015][2][24]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2015][2][28]=Array(2,'','');

$jiaSet[2015][3][8]=Array(3,'妇女节','/holiday38/','三八妇女节祝福');


$jiaSet[2015][4][1]=Array(0,'愚人节','/holiday41/','愚人节整人大全');
$jiaSet[2015][4][4]=Array(1,'清明节','','清明节放假安排');
$jiaSet[2015][4][5]=Array(1,'','','清明节放假');
$jiaSet[2015][4][6]=Array(1,'','','清明节放假');

$jiaSet[2015][5][1]=Array(1,'劳动节','/holiday51/','五一劳动节祝福');
$jiaSet[2015][5][2]=Array(1,'','/holiday51/','五一劳动节放假');
$jiaSet[2015][5][3]=Array(1,'','/holiday51/','五一劳动节放假');
$jiaSet[2015][5][4]=Array(2,'青年节','/holiday54/','五四青年节祝福');
$jiaSet[2015][5][10]=Array(3,'母亲节','/holiday527/','母亲节祝福');

$jiaSet[2015][6][1]=Array(0,'儿童节','/holiday61/','');

$jiaSet[2015][6][20]=Array(1,'端午节','/holiday55/','端午节放假');
$jiaSet[2015][6][21]=Array(1,'父亲节','/holiday637/','端午节放假');
$jiaSet[2015][6][22]=Array(1,'','/holiday55/','端午节放假');

$jiaSet[2015][7][1]=Array(0,'建党节','');
$jiaSet[2015][8][1]=Array(0,'建军节','');
$jiaSet[2015][8][20]=Array(0,'七夕节','/holiday77/','七夕情人节祝福');
$jiaSet[2015][9][10]=Array(0,'教师节','/holiday910/','教师节祝福');

$jiaSet[2015][9][26]=Array(1,'','/holiday815/','中秋节放假');
$jiaSet[2015][9][27]=Array(1,'中秋节','/holiday815/','中秋节放假');

$jiaSet[2015][10][1]=Array(1,'国庆节','/holiday1001/','国庆节祝福');
$jiaSet[2015][10][2]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2015][10][3]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2015][10][4]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2015][10][5]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2015][10][6]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2015][10][7]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2015][10][10]=Array(2,'','');

$jiaSet[2015][11][11]=Array(0,'光棍节','/holiday1111/','光棍节祝福');
$jiaSet[2015][12][25]=Array(3,'圣诞节','/holiday1225/','圣诞节祝福');




$jiaSet[2016]=Array();
$jiaSet[2016][1][6]=Array(0,'小寒','');
$jiaSet[2016][1][20]=Array(0,'大寒','');
$jiaSet[2016][2][4]=Array(0,'立春','');
$jiaSet[2016][2][19]=Array(0,'雨水','');
$jiaSet[2016][3][5]=Array(0,'惊蛰','');
$jiaSet[2016][3][20]=Array(0,'春分','');
$jiaSet[2016][4][4]=Array(0,'清明','');
$jiaSet[2016][4][19]=Array(0,'谷雨','');

$jiaSet[2016][5][5]=Array(0,'立夏','');
$jiaSet[2016][5][20]=Array(0,'小满','');

$jiaSet[2016][6][5]=Array(0,'芒种','');
$jiaSet[2016][6][21]=Array(0,'夏至','');
$jiaSet[2016][7][7]=Array(0,'小暑','');
$jiaSet[2016][7][22]=Array(0,'大暑','');

$jiaSet[2016][8][7]=Array(0,'立秋','');
$jiaSet[2016][8][23]=Array(0,'处暑','');
$jiaSet[2016][9][7]=Array(0,'白露','');
$jiaSet[2016][9][22]=Array(0,'秋分','');

$jiaSet[2016][10][8]=Array(0,'寒露','');
$jiaSet[2016][10][23]=Array(0,'霜降','');
$jiaSet[2016][11][7]=Array(0,'立冬','');
$jiaSet[2016][11][22]=Array(0,'小雪','');
$jiaSet[2016][12][6]=Array(0,'大雪','');
$jiaSet[2016][12][21]=Array(0,'冬至','');

$jiaSet[2016][1][1]=Array(1,'元旦','/holiday11/','元旦祝福');
$jiaSet[2016][1][2]=Array(1,'','/holiday11/','元旦放假');
$jiaSet[2016][1][3]=Array(1,'','/holiday11/','元旦放假');


$jiaSet[2016][2][6]=Array(2,'','');
$jiaSet[2016][2][7]=Array(1,'除夕','/holiday10/','除夕放假');
$jiaSet[2016][2][8]=Array(1,'春节','/holiday10/','春节祝福');
$jiaSet[2016][2][9]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2016][2][10]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2016][2][11]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2016][2][12]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2016][2][13]=Array(1,'','/holiday10/','春节放假');
$jiaSet[2016][2][14]=Array(2,'','');
$jiaSet[2016][2][22]=Array(0,'元宵节','/holiday115/','元宵节祝福');

$jiaSet[2016][3][8]=Array(3,'妇女节','/holiday38/','三八妇女节祝福');


$jiaSet[2016][4][1]=Array(0,'愚人节','/holiday41/','愚人节整人大全');
$jiaSet[2016][4][2]=Array(1,'','','清明节放假');
$jiaSet[2016][4][3]=Array(1,'','','清明节放假');
$jiaSet[2016][4][4]=Array(1,'清明节','','清明节放假');

$jiaSet[2016][4][30]=Array(1,'','/holiday51/','五一劳动节放假');
$jiaSet[2016][5][1]=Array(1,'劳动节','/holiday51/','五一劳动节祝福');
$jiaSet[2016][5][2]=Array(1,'','/holiday51/','五一劳动节放假');

$jiaSet[2016][5][4]=Array(0,'青年节','/holiday54/','五四青年节祝福');
$jiaSet[2016][5][8]=Array(3,'母亲节','/holiday527/','母亲节祝福');

$jiaSet[2016][6][1]=Array(0,'儿童节','/holiday61/','');

$jiaSet[2016][6][9]=Array(1,'端午节','/holiday55/','端午节放假');
$jiaSet[2016][6][10]=Array(1,'','/holiday55/','端午节放假');
$jiaSet[2016][6][11]=Array(1,'','/holiday55/','端午节放假');
$jiaSet[2016][6][12]=Array(2,'','');

$jiaSet[2016][6][19]=Array(0,'父亲节','/holiday637/','父亲节祝福');

$jiaSet[2016][7][1]=Array(0,'建党节','');
$jiaSet[2016][8][1]=Array(0,'建军节','');
$jiaSet[2016][8][9]=Array(0,'七夕节','/holiday77/','七夕情人节祝福');
$jiaSet[2016][9][10]=Array(0,'教师节','/holiday910/','教师节祝福');

$jiaSet[2016][9][15]=Array(1,'中秋节','/holiday815/','中秋节放假');
$jiaSet[2016][9][16]=Array(1,'','/holiday815/','中秋节放假');
$jiaSet[2016][9][17]=Array(1,'','/holiday815/','中秋节放假');
$jiaSet[2016][9][18]=Array(2,'','');

$jiaSet[2016][10][1]=Array(1,'国庆节','/holiday1001/','国庆节祝福');
$jiaSet[2016][10][2]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2016][10][3]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2016][10][4]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2016][10][5]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2016][10][6]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2016][10][7]=Array(1,'','/holiday1001/','国庆节放假');
$jiaSet[2016][10][8]=Array(2,'寒露','');
$jiaSet[2016][10][9]=Array(2,'','');

$jiaSet[2016][11][11]=Array(0,'光棍节','/holiday1111/','光棍节祝福');
$jiaSet[2016][12][25]=Array(3,'圣诞节','/holiday1225/','圣诞节祝福');






$mten=array("null","甲","乙","丙","丁","戊","己","庚","辛","壬","癸");
//农历地支
$mtwelve=array("null","子（鼠）","丑（牛）","寅（虎）","卯（兔）","辰（龙）",
			   "巳（蛇）","午（马）","未（羊）","申（猴）","酉（鸡）","戌（狗）","亥（猪）");
$yearSet=Array(
2011=>array(0,30,29,30,30,29,30,29,29,30,29,30,29,0,8,4),
2012=>array(4,30,29,30,30,29,30,29,30,29,30,29,30,29,9,5),
2013=>array(0,30,29,30,29,30,30,29,30,29,30,29,30,0,10,6),
2014=>array(9,29,30,29,30,29,30,29,30,30,29,30,29,30,1,7),
2015=>array(0,29,30,29,29,30,29,30,30,30,29,30,29,0,2,8),
2016=>array(0,30,29,30,29,29,30,29,30,30,29,30,30,0,3,9),
2017=>array(6,29,30,29,30,29,29,30,29,30,29,30,30,30,4,10),
2018=>array(0,29,30,29,30,29,29,30,29,30,29,30,30,0,5,11),
2019=>array(0,30,29,30,29,30,29,29,30,29,29,30,30,0,6,12),
2020=>array(4,29,30,30,30,29,30,29,29,30,29,30,29,30,7,1)
);

function getMonthShow($year,$month)
{
	global $jiaSet,$yearSet; 
	if($year<2012) $year=2012;

	//农历月份
	$mStr=array("闰","正","二","三","四","五","六",
				  "七","八","九","十","冬","腊","月");
	//农历日
	$dayStr=array("null","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
				"十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
				"廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十");


	//2012-01-01(2011.12.8)
	$mmth=12;
	$mday=8;
	$myear=2011;
	
	$total=0;
	$mtotal=0;
	for ($y=2012; $y<$year; $y++)
	{
		$total+=365;
		if ($y%4==0) $total ++;
	}

	$dt=strtotime($year.'-'.$month.'-01 12:00:00');

	//计算1日的农历日期
	$dnum=1+date('z',$dt);//当年第N天
	$dnum=$total+$dnum; //2012.1.1的第N天

	$n=0;
	//计算农历日期
	for ($j=2011; ($j<=$year and $dnum>1); $j++)
	{
		$nls=$yearSet[$year];
		$myear=$j;
		foreach ($nls as $m => $arr)
		{
			if ($m<1 or $m>13)
			{
				continue;
			}

			if($j==2011) {
				if($m<12) continue;

				for ($i=8; $i<=$yearSet[$j][$m]; $i++)
				{
					$n++;
					$mday=$i;
					if ($n>=$dnum)
					{
						break 3;
					}
				}
			}
			else
			{
				for ($i=1; $i<=$yearSet[$j][$m]; $i++)
				{
					$n++;
					$mmth=$m;
					$mday=$i;
					if ($n>=$dnum)
					{
						break 3;
					}
				}
			}
		}
	}

	//return "($dnum) $myear _ $mmth _ $mday";
	for ($i=2012; $i<=$year; $i++)
	{
		$n++;
		if($n>=$dnum) break;
	}
	
	

	$dw=date('w',$dt)-1;//当月1日是星期几
	if($dw==-1) $dw=6;
	$daymax=date('t',$dt); //当月天数
	$html='
<table border="0" cellspacing="1" cellpadding="0" class="klrili">
	<tr align="center">
	<th width="14%"><b>一</b></th>
	<th width="14%"><b>二</b></th>
	<th width="14%"><b>三</b></th>
	<th width="14%"><b>四</b></th>
	<th width="14%"><b>五</b></th>
	<th width="14%"><b>六</b></th>
	<th width="14%"><b>日</b></th>
	</tr>
	<tr align="center">';

	for ($i=0; $i<$dw ; $i++)
	{
		$html=$html.'
	<td></td>';
	}

	$mday=$mday-1;
	for ($d=1; $d<=$daymax; $d++)
	{
		$mday=$mday+1;
		//echo "$myear _ $mmth : ".$yearSet[$myear][$mmth];exit;
		//跨月了
		if ($mday>$yearSet[$myear][$mmth])
		{
			$mmth=$mmth+1;
			$mday=1;
			//跨年了
			if($yearSet[$myear][$mmth]<28){
				$myear=$myear+1;
				$mmth=1;
			}
		}

		
		$styled='';
		if($i%7==5 or $i%7==6) $styled=' style="color:red;"';
		$classname='';
		$nl='';
		if($mday==1){
			$tag=$mmth;
			if($yearSet[$myear][0]>0 and $mmth>$yearSet[$myear][0]){
				$tag=$tag-1;
			}
			$nl=$mStr[$tag].$mStr[13];
			if($tag=$mmth-1 and $tag==$yearSet[$myear][0]) $nl=$mStr[0].$nl;
		}
		else
		{
			$nl=$dayStr[$mday];
		}
		$arr=Array();
		if (isset($jiaSet[$year][$month][$d]))
		{
			$arr=$jiaSet[$year][$month][$d];
			if (!empty($arr[1]))
			{
				$nl=$arr[1];
				if($arr[0]==3 or $arr[0]==1) {
					$nl='<font color="red">'.$nl.'</font>';
				}
			}
			if($arr[0]==1) {
				$styled=' style="color:red;"';
				$classname=' class="jia"';
			}
			else if ($arr[0]==2) 
			{
				$styled=' style="color:#0000EE;"';
				$classname=' class="ban"';
			}
			else if (strlen($arr[2])>1)
			{
				$classname=' class="jie"';
			}
		}
		$str='<b'.$styled.'>'.$d.'</b><br />'.$nl.'';
		if (strlen($arr[2])>1)
		{
			$str='<a href="'.$arr[2].'"'.(strlen($arr[3]) ?' title="'.$arr[3].'"':'').'><div>'.$str.'</div></a>';
		}

		$html=$html.'
	<td'.$classname.'>'.$str.'</td>';

		$i++;
		if ($i%7==0 and $d<$daymax)
		{
			$html=$html.'</tr>
	<tr align="center">';
		}
	}

	$ds=$i%7;
	for ($j=$ds; ($ds>0 and $j<7); $j++)
	{
		$html=$html.'
	<td></td>';
	}


	$html=$html.'</tr></table>';
	return $html;
}


?>